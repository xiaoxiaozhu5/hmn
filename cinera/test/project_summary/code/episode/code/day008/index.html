<html>
    <head>
        <meta charset="UTF-8">
        <meta name="generator" content="Cinera 0.10.30">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="keywords" content="Programming, Speech">

        <link rel="stylesheet" type="text/css" href="https://handmade.network/public/annotations/cinera.css?r=39c76375">
        <link rel="stylesheet" type="text/css" href="https://handmade.network/public/annotations/cinera__hero.css?r=29c3877c">
        <link rel="stylesheet" type="text/css" href="https://handmade.network/public/annotations/cinera_topics.css?r=8e300c51">
        <script type="text/javascript" src="https://handmade.network/public/annotations/cinera_pre.js?r=3e2343d1"></script>
        <script type="text/javascript" src="https://handmade.network/public/annotations/cinera_player_pre.js?r=5587322c"></script>

        <meta property="cinera:type" content="entry">
        <meta property="cinera:title" content="Writing a Square Wave to DirectSound">
        <meta property="cinera:project" content="Handmade Hero">
        <meta property="cinera:project_lineage" content=" / Handmade Hero">
    </head>
    <body>
        <div>
            <!-- __CINERA_MENUS__ -->
            <div class="cinera">
            <script type="text/javascript" src="https://handmade.network/public/annotations/cinera_clear.js?r=00000000"></script>
            <div class="cineraMenus hero">
            <span class="episode_name">Writing a Square Wave to DirectSound</span>
            <div class="menu filter">
                <span><img src="https://handmade.network/public/annotations/cinera_icon_filter.png?r=3d831e54"></span>
                <div class="filter_container">
                   <div class="filter_header">
                       <div class="filter_mode exclusive">Filter mode: </div>
                       <div class="filter_titles">
                           <div class="filter_title">Topics</div>
                           <div class="filter_title">Media</div>
                       </div>
                   </div>
                   <div class="filters">
                        <div class="filter_topics">
                            <div title="Timestamps that don't fit into the above topic(s) may be filtered using this pseudo-topic" class="filter_content nullTopic">
                                <span class="icon category nullTopic"></span><span class="cineraText">(null topic)</span>
                            </div>
                        </div>
                        <div class="filter_media">
                            <div class="filter_content programming">
                                <span class="icon">&#128430;</span><span class="cineraText">Programming</span><span class="cineraDefaultMediumIndicator" title="Default medium
Timestamps lacking a media icon are in this medium">&#128969;</span>
                            </div>
                            <div class="filter_content speech">
                                <span class="icon">&#128489;</span><span class="cineraText">Speech</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="menu views">
                <div class="view" data-id="theatre" title="Theatre mode">&#127917;</div>
                <div class="views_container">
                    <div class="view" data-id="super" title="SUPERtheatre mode">&#127967;</div>
                </div>
            </div>
            <div class="menu link">
                <span>&#128279;</span>
                <div class="link_container">
                    <div id="cineraLinkMode">Link to: current timestamp</div>
                    <textarea title="Click to copy to clipboard" id="cineraLink" readonly spellcheck="false"></textarea>
                </div>
            </div>
            <div class="menu credits">
                <span>Credits</span>
                <div class="credits_container">
                    <span class="credit">
                        <a class="person" href="https://handmadehero.org/" target="_blank">
                            <div class="role">Host</div>
                            <div class="name">Casey Muratori</div>
                        </a>
                        <a class="support" href="https://handmadehero.org/fund" target="_blank"><img src="https://handmade.network/public/annotations/cinera_sprite_sendowl.png?r=6899f6b0"></a>
                    </span>
                    <span class="credit">
                        <div class="person">
                            <div class="role">Indexer</div>
                            <div class="name">Jace Bennett</div>
                        </div>
                    </span>
                    <span class="credit">
                        <a class="person" href="https://miblo.net/" target="_blank">
                            <div class="role">Indexer</div>
                            <div class="name">Matt Mascarenhas</div>
                        </a>
                        <a class="support" href="https://miblo.net/cinera#pledge" target="_blank"><img src="https://handmade.network/public/annotations/cinera_sprite_sendowl.png?r=6899f6b0"></a>
                    </span>
                    <span class="credit">
                        <div class="person">
                            <div class="role">Indexer</div>
                            <div class="name">Ben Craddock</div>
                        </div>
                    </span>
                </div>
            </div>
            <div class="cineraHelp">
                <span>?</span>
                <div class="help_container">
                    <span class="help_key">?</span><h1>Keyboard Navigation</h1>

                    <h2>Global Keys</h2>
                    <span class="help_key">[</span>, <span class="help_key">&lt;</span> / <span class="help_key">]</span>, <span class="help_key">&gt;</span> <span class="help_text">Jump to previous / next episode</span><br>
                    <span class="help_key">W</span>, <span class="help_key">K</span>, <span class="help_key">P</span> / <span class="help_key">S</span>, <span class="help_key">J</span>, <span class="help_key">N</span> <span class="help_text">Jump to previous / next timestamp</span><br>
                    <span class="help_key">t</span> / <span class="help_key">T</span> <span class="help_text">Toggle theatre / SUPERtheatre mode</span><br>
                    <span class="help_key">V</span> <span class="help_text">Revert filter to original state</span> <span class="help_key">Y</span> <span class="help_text">Select link (requires manual Ctrl-c)</span>

                    <h2>Menu toggling</h2>
                    <span class="help_key unavailable">q</span> <span class="help_text unavailable">Quotes</span>
                    <span class="help_key unavailable">r</span> <span class="help_text unavailable">References</span>
                    <span class="help_key">f</span> <span class="help_text">Filter</span>
                    <span class="help_key">y</span> <span class="help_text">Link</span>
                    <span class="help_key">c</span> <span class="help_text">Credits</span>

                    <h2>In-Menu and <span class="help_title_key help_custom_index">Index</span> Controls</h2>
                    <div class="help_paragraph">
                        <div class="key_block">
                            <div>
                                <span class="help_key">a</span>
                            </div>
                            <div>
                                <span class="help_key help_custom_index">w</span><br>
                                <span class="help_key help_custom_index">s</span>
                            </div>
                            <div>
                                <span class="help_key">d</span>
                            </div>
                        </div>
                        <div class="key_block">
                            <span class="help_key">h</span>
                            <span class="help_key help_custom_index">j</span>
                            <span class="help_key help_custom_index">k</span>
                            <span class="help_key">l</span>
                        </div>
                        <div class="key_block">
                            <div>
                                <span class="help_key">←</span>
                            </div>
                            <div>
                                <span class="help_key">↑</span><br>
                                <span class="help_key">↓</span>
                            </div>
                            <div>
                                <span class="help_key">→</span>
                            </div>
                        </div>
                    </div><br>
                    <div class="help_paragraph">
                        <span class="help_key help_custom_index">Esc</span> <span class="help_text">Close menu / unfocus timestamp</span>
                    </div>
                    <br>
                    <h2><span class="unavailable">Quotes and References Menus and</span> Index</h2>
                    <span class="help_key word">Enter</span> <span class="help_text">Jump to timestamp</span><br>

                    <h2><span class="unavailable">Quotes, References and</span> Credits Menus</h2>                    <span class="help_key">o</span> <span class="help_text">Open URL (in new tab)</span>

                    <h2>Filter Menu</h2>
                    <span class="help_key">x</span>, <span class="help_key word">Space</span> <span class="help_text">Toggle category and focus next</span><br>
                    <span class="help_key">X</span>, <span class="help_key word modifier">Shift</span><span class="help_key word">Space</span> <span class="help_text">Toggle category and focus previous</span><br>
                    <span class="help_key">v</span> <span class="help_text">Invert topics / media as per focus</span>

                    <h2>Filter and Link Menus</h2>
                    <span class="help_key">z</span> <span class="help_text">Toggle filter / linking mode</span>

                    <h2>Credits Menu</h2>
                    <span class="help_key word">Enter</span> <span class="help_text">Open URL (in new tab)</span><br>
                </div>
            </div>
        </div>
        <script src="https://www.youtube.com/iframe_api"></script>
        <div class="cineraPlayerContainer">
            <div class="video_container" data-platform="youtube" data-videoId="uiW1D1Vc7IQ"></div>
            <div class="markers_container hero">
                <a class="episodeMarker prev" href="https://hero.handmade.network/episode/code/day007/"><div>&#9195;</div><div>Previous: 'Initializing DirectSound'</div><div>&#9195;</div></a>
            <div class="markers">
                <div data-timestamp="64.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:04</span>Review of DirectSound init</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:04</span>Review of DirectSound init</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:04</span>Review of DirectSound init</div>
                    </div>
                </div>
                <div data-timestamp="136.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">2:16</span>Tangent: methods and vtables</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">2:16</span>Tangent: methods and vtables</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">2:16</span>Tangent: methods and vtables</div>
                    </div>
                </div>
                <div data-timestamp="532.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">8:52</span>Resume review of DirectSound init</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">8:52</span>Resume review of DirectSound init</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">8:52</span>Resume review of DirectSound init</div>
                    </div>
                </div>
                <div data-timestamp="861.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">14:21</span>Writing to the sound buffer</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">14:21</span>Writing to the sound buffer</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">14:21</span>Writing to the sound buffer</div>
                    </div>
                </div>
                <div data-timestamp="969.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">16:09</span>Discussion of waveforms for testing</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">16:09</span>Discussion of waveforms for testing</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">16:09</span>Discussion of waveforms for testing</div>
                    </div>
                </div>
                <div data-timestamp="1022.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">17:02</span>Locking the buffer</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">17:02</span>Locking the buffer</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">17:02</span>Locking the buffer</div>
                    </div>
                </div>
                <div data-timestamp="1099.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">18:19</span>Dealing with buffer pointers and locks</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">18:19</span>Dealing with buffer pointers and locks</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">18:19</span>Dealing with buffer pointers and locks</div>
                    </div>
                </div>
                <div data-timestamp="1269.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">21:09</span>The Lock() call</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">21:09</span>The Lock() call</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">21:09</span>The Lock() call</div>
                    </div>
                </div>
                <div data-timestamp="1379.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">22:59</span>Filling the buffer regions</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">22:59</span>Filling the buffer regions</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">22:59</span>Filling the buffer regions</div>
                    </div>
                </div>
                <div data-timestamp="1609.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">26:49</span>Generating a test tone</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">26:49</span>Generating a test tone</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">26:49</span>Generating a test tone</div>
                    </div>
                </div>
                <div data-timestamp="2128.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">35:28</span>Getting the WritePointer and BytesToWrite</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">35:28</span>Getting the WritePointer and BytesToWrite</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">35:28</span>Getting the WritePointer and BytesToWrite</div>
                    </div>
                </div>
                <div data-timestamp="2901.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">48:21</span>Refine square wave formula</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">48:21</span>Refine square wave formula</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">48:21</span>Refine square wave formula</div>
                    </div>
                </div>
                <div data-timestamp="3099.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">51:39</span>Review the code</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">51:39</span>Review the code</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">51:39</span>Review the code</div>
                    </div>
                </div>
                <div data-timestamp="3364.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">56:04</span>Start DirectSound playing</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">56:04</span>Start DirectSound playing</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">56:04</span>Start DirectSound playing</div>
                    </div>
                </div>
                <div data-timestamp="3447.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">57:27</span>HOLD YOUR EARS</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">57:27</span>HOLD YOUR EARS</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">57:27</span>HOLD YOUR EARS</div>
                    </div>
                </div>
                <div data-timestamp="3502.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">58:22</span>HOLD YOUR EARS</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">58:22</span>HOLD YOUR EARS</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">58:22</span>HOLD YOUR EARS</div>
                    </div>
                </div>
                <div data-timestamp="3562.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">59:22</span>Don&#39;t forget to Unlock the buffer</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">59:22</span>Don&#39;t forget to Unlock the buffer</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">59:22</span>Don&#39;t forget to Unlock the buffer</div>
                    </div>
                </div>
                <div data-timestamp="3658.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:00:58</span>Final Thoughts</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:00:58</span>Final Thoughts</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:00:58</span>Final Thoughts</div>
                    </div>
                </div>
                <div data-timestamp="3737.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:02:17</span>Review of mod operation and how we used it</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:02:17</span>Review of mod operation and how we used it</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:02:17</span>Review of mod operation and how we used it</div>
                    </div>
                </div>
                <div data-timestamp="4230.000" class="marker cat_nullTopic speech">
                    <div class="cineraContent"><span class="timecode">1:10:30</span>Q&amp;A<span class="cineraCategories"><div title="Speech" class="categoryMedium speech">&#128489;</div></span></div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:10:30</span>Q&amp;A<span class="cineraCategories"><div title="Speech" class="categoryMedium speech">&#128489;</div></span></div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:10:30</span>Q&amp;A<span class="cineraCategories"><div title="Speech" class="categoryMedium speech">&#128489;</div></span></div>
                    </div>
                </div>
                <div data-timestamp="4269.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:11:09</span>Will future broacasts use this Europe-friendly time?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:11:09</span>Will future broacasts use this Europe-friendly time?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:11:09</span>Will future broacasts use this Europe-friendly time?</div>
                    </div>
                </div>
                <div data-timestamp="4281.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:11:21</span>Why not XAudio2?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:11:21</span>Why not XAudio2?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:11:21</span>Why not XAudio2?</div>
                    </div>
                </div>
                <div data-timestamp="4363.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:12:43</span>Are we going to factor sound playing to a seperate function?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:12:43</span>Are we going to factor sound playing to a seperate function?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:12:43</span>Are we going to factor sound playing to a seperate function?</div>
                    </div>
                </div>
                <div data-timestamp="4425.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:13:45</span>Will we rename GlobalSecondaryBuffer?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:13:45</span>Will we rename GlobalSecondaryBuffer?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:13:45</span>Will we rename GlobalSecondaryBuffer?</div>
                    </div>
                </div>
                <div data-timestamp="4450.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:14:10</span>Challenge: XAudio2 is supported on XP</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:14:10</span>Challenge: XAudio2 is supported on XP</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:14:10</span>Challenge: XAudio2 is supported on XP</div>
                    </div>
                </div>
                <div data-timestamp="4489.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:14:49</span>Why keyboard events instead of polling?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:14:49</span>Why keyboard events instead of polling?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:14:49</span>Why keyboard events instead of polling?</div>
                    </div>
                </div>
                <div data-timestamp="4524.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:15:24</span>Will we be able to remap keys?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:15:24</span>Will we be able to remap keys?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:15:24</span>Will we be able to remap keys?</div>
                    </div>
                </div>
                <div data-timestamp="4543.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:15:43</span>Doesn&#39;t the size of the buffer increase latency?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:15:43</span>Doesn&#39;t the size of the buffer increase latency?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:15:43</span>Doesn&#39;t the size of the buffer increase latency?</div>
                    </div>
                </div>
                <div data-timestamp="4613.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:16:53</span>Will we write audio filters, like reverb?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:16:53</span>Will we write audio filters, like reverb?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:16:53</span>Will we write audio filters, like reverb?</div>
                    </div>
                </div>
                <div data-timestamp="4636.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:17:16</span>Will we factor the code into seperate files?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:17:16</span>Will we factor the code into seperate files?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:17:16</span>Will we factor the code into seperate files?</div>
                    </div>
                </div>
                <div data-timestamp="4686.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:18:06</span>It takes about a second to start playing, is that expected?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:18:06</span>It takes about a second to start playing, is that expected?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:18:06</span>It takes about a second to start playing, is that expected?</div>
                    </div>
                </div>
                <div data-timestamp="4959.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:22:39</span>Can you show a sine wave as well?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:22:39</span>Can you show a sine wave as well?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:22:39</span>Can you show a sine wave as well?</div>
                    </div>
                </div>
                <div data-timestamp="4982.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:23:02</span>What is acceptable latency?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:23:02</span>What is acceptable latency?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:23:02</span>What is acceptable latency?</div>
                    </div>
                </div>
                <div data-timestamp="5344.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:29:04</span>No Poop Sauce</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:29:04</span>No Poop Sauce</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:29:04</span>No Poop Sauce</div>
                    </div>
                </div>
            </div>
                <a class="episodeMarker next" href="https://hero.handmade.network/episode/code/day009/"><div>&#9196;</div><div>Next: 'Variable-Pitch Sine Wave Output'</div><div>&#9196;</div></a>
            </div>
        </div>
        </div>
    <script type="text/javascript" src="https://handmade.network/public/annotations/cinera_player_post.js?r=285016ab"></script>
        </div>
        <!-- __CINERA_SCRIPT__ -->

        <article id="video-notes">
            <h1>Writing a Square Wave to DirectSound</h1>
            <h3 id="directsound-is-object-oriented">DirectSound is Object Oriented</h3>
            <p>DirectSound in an object-oriented API. What does that mean? Casey starts this episode with a discussion of &quot;method&quot;
                dispatch through vtables, and why c++ virtual calls are costly.</p>
            <h3 id="reviewing-directsound-inititalization">Reviewing DirectSound Inititalization</h3>
            <p>The basic process for initializing DirectSound is as follows:</p>
            <ol>
                <li>Load the Library - <a href="http://msdn.microsoft.com/en-us/library/ms684175.aspx"><code>LoadLibrary</code></a><code>(&quot;dsound.dll&quot;)</code></li>
                <li>Create a DirectSound object - <a href="http://msdn.microsoft.com/en-us/library/microsoft.directx_sdk.reference.directsoundcreate8.aspx"><code>DirectSoundCreate()</code></a></li>
                <li>Set the Cooperative Level - <a href="http://msdn.microsoft.com/en-us/library/microsoft.directx_sdk.idirectsound8.idirectsound8.setcooperativelevel.aspx"><code>IDirectSound8::SetCooperativeLevel()</code></a></li>
                <li>&quot;Create&quot; a primary buffer - <a href="http://msdn.microsoft.com/en-us/library/microsoft.directx_sdk.idirectsound8.idirectsound8.createsoundbuffer.aspx"><code>IDirectSound8::CreateSoundBuffer()</code></a></li>
                <li>Create a secondary buffer</li>
                <li>Tell DirectSound to start playing the secondary buffer - <a href="http://msdn.microsoft.com/en-us/library/microsoft.directx_sdk.idirectsoundbuffer8.idirectsoundbuffer8.play.aspx"><code>IDirectSoundBuffer8::Play()</code></a></li>
            </ol>
            <h3 id="playing-sounds">Playing sounds</h3>
            <p>Audio is a complicated topic, and we start with a discussion of audio &quot;waveforms&quot; and how PCM audio data is encoded in
                memory.</p>
            <ul>
                <li>A square wave oscillates between &quot;full-positive&quot; to &quot;full-negative&quot; every half period</li>
                <li>A Stereo (2-channel) 16-bit PCM audio buffer is arranged as an array of signed int16 values in (left channel value,
                    right channel value) pairs</li>
                <li>A &quot;sample&quot; sometimes refers to the values for all channels in a sampling period, and sometimes a value for a single
                    channel. Be careful.</li>
            </ul>
            <p>The procedure for writing sound data into a buffer is as follows</p>
            <ol>
                <li>Figure out where in the buffer you want to start writing, and how much data you want to write
                    <ul>
                        <li>Its useful to look at the play cursor - <a href="http://msdn.microsoft.com/en-us/library/microsoft.directx_sdk.idirectsoundbuffer8.idirectsoundbuffer8.getcurrentposition.aspx"><code>IDirectSoundBuffer8::GetCurrentPosition()</code></a></li>
                    </ul>
                </li>
                <li>Acquire a lock on the buffer - <a href="http://msdn.microsoft.com/en-us/library/microsoft.directx_sdk.idirectsoundbuffer8.idirectsoundbuffer8.unlock.aspx"><code>IDirectSoundBuffer8::Lock()</code></a>
                    <ul>
                        <li>Because we are working with a circular buffer, this call will return 1 or 2 writable regions</li>
                    </ul>
                </li>
                <li>Write the samples to the buffer</li>
                <li>Unlock the regions - <a href="http://msdn.microsoft.com/en-us/library/microsoft.directx_sdk.idirectsoundbuffer8.idirectsoundbuffer8.unlock.aspx"><code>IDirectSoundBuffer8::Unlock()</code></a></li>
            </ol>
            <h3 id="a-note-on-audio-latency">A note on audio latency</h3>
            <p>Audio latency is determined not by the size of the buffer, but by how far ahead of the PlayCursor you write. The optimal
                amount of latency is the amount that will cause this frame&#39;s audio to coincide with the display of this frame&#39;s image.
                On most platforms, it is very difficult to ascertain the proper amount of latency. It&#39;s an unsolved problem, and games
                with need precise AV sync (like Guitar Hero) go to some lengths to achieve it.</p>
        </article>
    </body>
</html>
