<html>
    <head>
        <meta charset="UTF-8">
        <meta name="generator" content="Cinera 0.10.30">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="keywords" content="Chat Comment, Programming, Speech">

        <link rel="stylesheet" type="text/css" href="https://handmade.network/public/annotations/cinera.css?r=39c76375">
        <link rel="stylesheet" type="text/css" href="https://handmade.network/public/annotations/cinera__hero.css?r=29c3877c">
        <link rel="stylesheet" type="text/css" href="https://handmade.network/public/annotations/cinera_topics.css?r=8e300c51">
        <script type="text/javascript" src="https://handmade.network/public/annotations/cinera_pre.js?r=3e2343d1"></script>
        <script type="text/javascript" src="https://handmade.network/public/annotations/cinera_player_pre.js?r=5587322c"></script>

        <meta property="cinera:type" content="entry">
        <meta property="cinera:title" content="QueryPerformanceCounter and RDTSC">
        <meta property="cinera:project" content="Handmade Hero">
        <meta property="cinera:project_lineage" content=" / Handmade Hero">
    </head>
    <body>
        <div>
            <!-- __CINERA_MENUS__ -->
            <div class="cinera">
            <script type="text/javascript" src="https://handmade.network/public/annotations/cinera_clear.js?r=00000000"></script>
            <div class="cineraMenus hero">
            <span class="episode_name">QueryPerformanceCounter and RDTSC</span>
            <div class="menu filter">
                <span><img src="https://handmade.network/public/annotations/cinera_icon_filter.png?r=3d831e54"></span>
                <div class="filter_container">
                   <div class="filter_header">
                       <div class="filter_mode exclusive">Filter mode: </div>
                       <div class="filter_titles">
                           <div class="filter_title">Topics</div>
                           <div class="filter_title">Media</div>
                       </div>
                   </div>
                   <div class="filters">
                        <div class="filter_topics">
                            <div title="Timestamps that don't fit into the above topic(s) may be filtered using this pseudo-topic" class="filter_content nullTopic">
                                <span class="icon category nullTopic"></span><span class="cineraText">(null topic)</span>
                            </div>
                        </div>
                        <div class="filter_media">
                            <div class="filter_content authored">
                                <span class="icon">&#128490;</span><span class="cineraText">Chat Comment</span>
                            </div>
                            <div class="filter_content programming">
                                <span class="icon">&#128430;</span><span class="cineraText">Programming</span><span class="cineraDefaultMediumIndicator" title="Default medium
Timestamps lacking a media icon are in this medium">&#128969;</span>
                            </div>
                            <div class="filter_content speech">
                                <span class="icon">&#128489;</span><span class="cineraText">Speech</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="menu views">
                <div class="view" data-id="theatre" title="Theatre mode">&#127917;</div>
                <div class="views_container">
                    <div class="view" data-id="super" title="SUPERtheatre mode">&#127967;</div>
                </div>
            </div>
            <div class="menu link">
                <span>&#128279;</span>
                <div class="link_container">
                    <div id="cineraLinkMode">Link to: current timestamp</div>
                    <textarea title="Click to copy to clipboard" id="cineraLink" readonly spellcheck="false"></textarea>
                </div>
            </div>
            <div class="menu credits">
                <span>Credits</span>
                <div class="credits_container">
                    <span class="credit">
                        <a class="person" href="https://handmadehero.org/" target="_blank">
                            <div class="role">Host</div>
                            <div class="name">Casey Muratori</div>
                        </a>
                        <a class="support" href="https://handmadehero.org/fund" target="_blank"><img src="https://handmade.network/public/annotations/cinera_sprite_sendowl.png?r=6899f6b0"></a>
                    </span>
                    <span class="credit">
                        <div class="person">
                            <div class="role">Indexer</div>
                            <div class="name">Jace Bennett</div>
                        </div>
                    </span>
                    <span class="credit">
                        <a class="person" href="https://miblo.net/" target="_blank">
                            <div class="role">Indexer</div>
                            <div class="name">Matt Mascarenhas</div>
                        </a>
                        <a class="support" href="https://miblo.net/cinera#pledge" target="_blank"><img src="https://handmade.network/public/annotations/cinera_sprite_sendowl.png?r=6899f6b0"></a>
                    </span>
                    <span class="credit">
                        <div class="person">
                            <div class="role">Indexer</div>
                            <div class="name">Ben Craddock</div>
                        </div>
                    </span>
                </div>
            </div>
            <div class="cineraHelp">
                <span>?</span>
                <div class="help_container">
                    <span class="help_key">?</span><h1>Keyboard Navigation</h1>

                    <h2>Global Keys</h2>
                    <span class="help_key">[</span>, <span class="help_key">&lt;</span> / <span class="help_key">]</span>, <span class="help_key">&gt;</span> <span class="help_text">Jump to previous / next episode</span><br>
                    <span class="help_key">W</span>, <span class="help_key">K</span>, <span class="help_key">P</span> / <span class="help_key">S</span>, <span class="help_key">J</span>, <span class="help_key">N</span> <span class="help_text">Jump to previous / next timestamp</span><br>
                    <span class="help_key">t</span> / <span class="help_key">T</span> <span class="help_text">Toggle theatre / SUPERtheatre mode</span><br>
                    <span class="help_key">V</span> <span class="help_text">Revert filter to original state</span> <span class="help_key">Y</span> <span class="help_text">Select link (requires manual Ctrl-c)</span>

                    <h2>Menu toggling</h2>
                    <span class="help_key unavailable">q</span> <span class="help_text unavailable">Quotes</span>
                    <span class="help_key unavailable">r</span> <span class="help_text unavailable">References</span>
                    <span class="help_key">f</span> <span class="help_text">Filter</span>
                    <span class="help_key">y</span> <span class="help_text">Link</span>
                    <span class="help_key">c</span> <span class="help_text">Credits</span>

                    <h2>In-Menu and <span class="help_title_key help_custom_index">Index</span> Controls</h2>
                    <div class="help_paragraph">
                        <div class="key_block">
                            <div>
                                <span class="help_key">a</span>
                            </div>
                            <div>
                                <span class="help_key help_custom_index">w</span><br>
                                <span class="help_key help_custom_index">s</span>
                            </div>
                            <div>
                                <span class="help_key">d</span>
                            </div>
                        </div>
                        <div class="key_block">
                            <span class="help_key">h</span>
                            <span class="help_key help_custom_index">j</span>
                            <span class="help_key help_custom_index">k</span>
                            <span class="help_key">l</span>
                        </div>
                        <div class="key_block">
                            <div>
                                <span class="help_key">←</span>
                            </div>
                            <div>
                                <span class="help_key">↑</span><br>
                                <span class="help_key">↓</span>
                            </div>
                            <div>
                                <span class="help_key">→</span>
                            </div>
                        </div>
                    </div><br>
                    <div class="help_paragraph">
                        <span class="help_key help_custom_index">Esc</span> <span class="help_text">Close menu / unfocus timestamp</span>
                    </div>
                    <br>
                    <h2><span class="unavailable">Quotes and References Menus and</span> Index</h2>
                    <span class="help_key word">Enter</span> <span class="help_text">Jump to timestamp</span><br>

                    <h2><span class="unavailable">Quotes, References and</span> Credits Menus</h2>                    <span class="help_key">o</span> <span class="help_text">Open URL (in new tab)</span>

                    <h2>Filter Menu</h2>
                    <span class="help_key">x</span>, <span class="help_key word">Space</span> <span class="help_text">Toggle category and focus next</span><br>
                    <span class="help_key">X</span>, <span class="help_key word modifier">Shift</span><span class="help_key word">Space</span> <span class="help_text">Toggle category and focus previous</span><br>
                    <span class="help_key">v</span> <span class="help_text">Invert topics / media as per focus</span>

                    <h2>Filter and Link Menus</h2>
                    <span class="help_key">z</span> <span class="help_text">Toggle filter / linking mode</span>

                    <h2>Credits Menu</h2>
                    <span class="help_key word">Enter</span> <span class="help_text">Open URL (in new tab)</span><br>
                </div>
            </div>
        </div>
        <script src="https://www.youtube.com/iframe_api"></script>
        <div class="cineraPlayerContainer">
            <div class="video_container" data-platform="youtube" data-videoId="tAcUIEoy2Yk"></div>
            <div class="markers_container hero">
                <a class="episodeMarker prev" href="https://hero.handmade.network/episode/code/day009/"><div>&#9195;</div><div>Previous: 'Variable-Pitch Sine Wave Output'</div><div>&#9195;</div></a>
            <div class="markers">
                <div data-timestamp="79.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:19</span>The Intel Architecture Reference Manual</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:19</span>The Intel Architecture Reference Manual</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:19</span>The Intel Architecture Reference Manual</div>
                    </div>
                </div>
                <div data-timestamp="229.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">3:49</span>RDTSC- Read Time-Stamp Counter, measures clock cycles</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">3:49</span>RDTSC- Read Time-Stamp Counter, measures clock cycles</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">3:49</span>RDTSC- Read Time-Stamp Counter, measures clock cycles</div>
                    </div>
                </div>
                <div data-timestamp="460.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">7:40</span>QueryPerformanceCounter(), measures wall clock time</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">7:40</span>QueryPerformanceCounter(), measures wall clock time</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">7:40</span>QueryPerformanceCounter(), measures wall clock time</div>
                    </div>
                </div>
                <div data-timestamp="930.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">15:30</span>Timing our frames</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">15:30</span>Timing our frames</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">15:30</span>Timing our frames</div>
                    </div>
                </div>
                <div data-timestamp="1022.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">17:02</span>Union types (LARGE_INTEGER)</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">17:02</span>Union types (LARGE_INTEGER)</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">17:02</span>Union types (LARGE_INTEGER)</div>
                    </div>
                </div>
                <div data-timestamp="1308.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">21:48</span>Method of determining time elapsed between frames</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">21:48</span>Method of determining time elapsed between frames</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">21:48</span>Method of determining time elapsed between frames</div>
                    </div>
                </div>
                <div data-timestamp="1399.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">23:19</span>QueryPerformanceFrequency()</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">23:19</span>QueryPerformanceFrequency()</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">23:19</span>QueryPerformanceFrequency()</div>
                    </div>
                </div>
                <div data-timestamp="1592.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">26:32</span>Using dimensional analysis to convert between unit types</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">26:32</span>Using dimensional analysis to convert between unit types</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">26:32</span>Using dimensional analysis to convert between unit types</div>
                    </div>
                </div>
                <div data-timestamp="1873.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">31:13</span>Converting seconds/frame to ms/frame</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">31:13</span>Converting seconds/frame to ms/frame</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">31:13</span>Converting seconds/frame to ms/frame</div>
                    </div>
                </div>
                <div data-timestamp="1956.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">32:36</span>Printing out MSPerFrame</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">32:36</span>Printing out MSPerFrame</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">32:36</span>Printing out MSPerFrame</div>
                    </div>
                </div>
                <div data-timestamp="2290.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">38:10</span>Finding Frames Per Second using dimensional analysis (cause we can)</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">38:10</span>Finding Frames Per Second using dimensional analysis (cause we can)</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">38:10</span>Finding Frames Per Second using dimensional analysis (cause we can)</div>
                    </div>
                </div>
                <div data-timestamp="2744.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">45:44</span>The dangers of wsprintf()</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">45:44</span>The dangers of wsprintf()</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">45:44</span>The dangers of wsprintf()</div>
                    </div>
                </div>
                <div data-timestamp="3010.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">50:10</span>Using RDTSC to find cycles per frame</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">50:10</span>Using RDTSC to find cycles per frame</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">50:10</span>Using RDTSC to find cycles per frame</div>
                    </div>
                </div>
                <div data-timestamp="3403.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">56:43</span>Use wsprintf() to print our timings as floats</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">56:43</span>Use wsprintf() to print our timings as floats</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">56:43</span>Use wsprintf() to print our timings as floats</div>
                    </div>
                </div>
                <div data-timestamp="3558.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">59:18</span>A bit more about wsprintf()</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">59:18</span>A bit more about wsprintf()</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">59:18</span>A bit more about wsprintf()</div>
                    </div>
                </div>
                <div data-timestamp="3725.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:02:05</span>Final Thoughts</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:02:05</span>Final Thoughts</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:02:05</span>Final Thoughts</div>
                    </div>
                </div>
                <div data-timestamp="3872.000" class="marker cat_nullTopic speech">
                    <div class="cineraContent"><span class="timecode">1:04:32</span>Q&amp;A<span class="cineraCategories"><div title="Speech" class="categoryMedium speech">&#128489;</div></span></div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:04:32</span>Q&amp;A<span class="cineraCategories"><div title="Speech" class="categoryMedium speech">&#128489;</div></span></div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:04:32</span>Q&amp;A<span class="cineraCategories"><div title="Speech" class="categoryMedium speech">&#128489;</div></span></div>
                    </div>
                </div>
                <div data-timestamp="3886.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:04:46</span>RDTSC returns unsigned int</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:04:46</span>RDTSC returns unsigned int</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:04:46</span>RDTSC returns unsigned int</div>
                    </div>
                </div>
                <div data-timestamp="3928.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:05:28</span>Explanation of how C handles division based on type</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:05:28</span>Explanation of how C handles division based on type</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:05:28</span>Explanation of how C handles division based on type</div>
                    </div>
                </div>
                <div data-timestamp="4054.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:07:34</span>How compiler optimizations affect the execution time</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:07:34</span>How compiler optimizations affect the execution time</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:07:34</span>How compiler optimizations affect the execution time</div>
                    </div>
                </div>
                <div data-timestamp="4198.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:09:58</span>Do the divide in doubles.</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:09:58</span>Do the divide in doubles.</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:09:58</span>Do the divide in doubles.</div>
                    </div>
                </div>
                <div data-timestamp="4406.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:13:26</span>It would be nice to have a roadmap...Would you consider doing a 24 hour stream?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:13:26</span>It would be nice to have a roadmap...Would you consider doing a 24 hour stream?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:13:26</span>It would be nice to have a roadmap...Would you consider doing a 24 hour stream?</div>
                    </div>
                </div>
                <div data-timestamp="4470.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:14:30</span>Will we be able to use a Playstation 2 controller?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:14:30</span>Will we be able to use a Playstation 2 controller?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:14:30</span>Will we be able to use a Playstation 2 controller?</div>
                    </div>
                </div>
                <div data-timestamp="4493.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:14:53</span>Can we expect more Jeff and Casey shows in the future?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:14:53</span>Can we expect more Jeff and Casey shows in the future?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:14:53</span>Can we expect more Jeff and Casey shows in the future?</div>
                    </div>
                </div>
                <div data-timestamp="4504.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:15:04</span>Is it safe to use 64-bit variables and functions on a 32-bit PC?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:15:04</span>Is it safe to use 64-bit variables and functions on a 32-bit PC?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:15:04</span>Is it safe to use 64-bit variables and functions on a 32-bit PC?</div>
                    </div>
                </div>
                <div data-timestamp="4577.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:16:17</span>Even though we are doing low level programming, sometimes we have to pass things to Windows, which makes it difficult to follow exactly what the computer is doing. Will this be the same when we go to other platforms?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:16:17</span>Even though we are doing low level programming, sometimes we have to pass things to Windows, which makes it difficult to follow exactly what the computer is doing. Will this be the same when we go to other platforms?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:16:17</span>Even though we are doing low level programming, sometimes we have to pass things to Windows, which makes it difficult to follow exactly what the computer is doing. Will this be the same when we go to other platforms?</div>
                    </div>
                </div>
                <div data-timestamp="4725.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:18:45</span>Do you use a profiler or mostly hand-coded timing calls?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:18:45</span>Do you use a profiler or mostly hand-coded timing calls?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:18:45</span>Do you use a profiler or mostly hand-coded timing calls?</div>
                    </div>
                </div>
                <div data-timestamp="4737.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:18:57</span>Why do you use PascalCase for everything?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:18:57</span>Why do you use PascalCase for everything?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:18:57</span>Why do you use PascalCase for everything?</div>
                    </div>
                </div>
                <div data-timestamp="4744.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:19:04</span>Is it a violation to set one member of a union and then read from another?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:19:04</span>Is it a violation to set one member of a union and then read from another?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:19:04</span>Is it a violation to set one member of a union and then read from another?</div>
                    </div>
                </div>
                <div data-timestamp="4755.000" class="marker cat_nullTopic authored">
                    <div class="cineraContent"><span class="timecode">1:19:15</span><span class="author" data-hue="154" data-saturation="97%">mvandevander</span>  Was wondering when we would get around to using RawInput to handle DualShock 4 natively<span class="cineraCategories"><div title="Chat Comment" class="categoryMedium authored">&#128490;</div></span></div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:19:15</span><span class="author" data-hue="154" data-saturation="97%">mvandevander</span>  Was wondering when we would get around to using RawInput to handle DualShock 4 natively<span class="cineraCategories"><div title="Chat Comment" class="categoryMedium authored">&#128490;</div></span></div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:19:15</span><span class="author" data-hue="154" data-saturation="97%">mvandevander</span>  Was wondering when we would get around to using RawInput to handle DualShock 4 natively<span class="cineraCategories"><div title="Chat Comment" class="categoryMedium authored">&#128490;</div></span></div>
                    </div>
                </div>
                <div data-timestamp="4847.000" class="marker cat_nullTopic authored">
                    <div class="cineraContent"><span class="timecode">1:20:47</span><span class="author" data-hue="160" data-saturation="89%">tom_forsyth</span>  Modern CPUs RDTSC returns nominal clocks not real clocks.<span class="cineraCategories"><div title="Chat Comment" class="categoryMedium authored">&#128490;</div></span></div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:20:47</span><span class="author" data-hue="160" data-saturation="89%">tom_forsyth</span>  Modern CPUs RDTSC returns nominal clocks not real clocks.<span class="cineraCategories"><div title="Chat Comment" class="categoryMedium authored">&#128490;</div></span></div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:20:47</span><span class="author" data-hue="160" data-saturation="89%">tom_forsyth</span>  Modern CPUs RDTSC returns nominal clocks not real clocks.<span class="cineraCategories"><div title="Chat Comment" class="categoryMedium authored">&#128490;</div></span></div>
                    </div>
                </div>
                <div data-timestamp="4934.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:22:14</span>Why are you avoiding doubles in your code?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:22:14</span>Why are you avoiding doubles in your code?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:22:14</span>Why are you avoiding doubles in your code?</div>
                    </div>
                </div>
                <div data-timestamp="4970.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:22:50</span>Are you opposed to ever using high level languages in making games?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:22:50</span>Are you opposed to ever using high level languages in making games?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:22:50</span>Are you opposed to ever using high level languages in making games?</div>
                    </div>
                </div>
                <div data-timestamp="5003.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:23:23</span>If you wanted to lock the FPS at a particular number, would you just sleep or do something more complex?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:23:23</span>If you wanted to lock the FPS at a particular number, would you just sleep or do something more complex?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:23:23</span>If you wanted to lock the FPS at a particular number, would you just sleep or do something more complex?</div>
                    </div>
                </div>
                <div data-timestamp="5095.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:24:55</span>Isn&#39;t RDTSC affected by variable processor technologies in modern processors like SpeedStep?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:24:55</span>Isn&#39;t RDTSC affected by variable processor technologies in modern processors like SpeedStep?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:24:55</span>Isn&#39;t RDTSC affected by variable processor technologies in modern processors like SpeedStep?</div>
                    </div>
                </div>
                <div data-timestamp="5214.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:26:54</span>Have you done Ludum Dare?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:26:54</span>Have you done Ludum Dare?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:26:54</span>Have you done Ludum Dare?</div>
                    </div>
                </div>
                <div data-timestamp="5230.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:27:10</span>Can we do a bonus stream on ASM?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:27:10</span>Can we do a bonus stream on ASM?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:27:10</span>Can we do a bonus stream on ASM?</div>
                    </div>
                </div>
                <div data-timestamp="5331.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:28:51</span>If you read the latency tables for SSE2 float vs double, you&#39;ll see that double isn&#39;t that much slower than float...</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:28:51</span>If you read the latency tables for SSE2 float vs double, you&#39;ll see that double isn&#39;t that much slower than float...</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:28:51</span>If you read the latency tables for SSE2 float vs double, you&#39;ll see that double isn&#39;t that much slower than float...</div>
                    </div>
                </div>
                <div data-timestamp="5838.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:37:18</span>What are your thoughts on Swift?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:37:18</span>What are your thoughts on Swift?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:37:18</span>What are your thoughts on Swift?</div>
                    </div>
                </div>
                <div data-timestamp="5843.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:37:23</span>What do you think of Jonathan Blow&#39;s programming language?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:37:23</span>What do you think of Jonathan Blow&#39;s programming language?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:37:23</span>What do you think of Jonathan Blow&#39;s programming language?</div>
                    </div>
                </div>
                <div data-timestamp="5870.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:37:50</span>Do you have any discussions with Jonathan Blow on his compiler and what sort of features you would like to see in it?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:37:50</span>Do you have any discussions with Jonathan Blow on his compiler and what sort of features you would like to see in it?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:37:50</span>Do you have any discussions with Jonathan Blow on his compiler and what sort of features you would like to see in it?</div>
                    </div>
                </div>
                <div data-timestamp="5939.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:38:59</span>Do you ever write functions like printf() that take variable arguments?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:38:59</span>Do you ever write functions like printf() that take variable arguments?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:38:59</span>Do you ever write functions like printf() that take variable arguments?</div>
                    </div>
                </div>
                <div data-timestamp="5947.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:39:07</span>Would you consider using a templated type-safe version of printf(), even though you hate templates?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:39:07</span>Would you consider using a templated type-safe version of printf(), even though you hate templates?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:39:07</span>Would you consider using a templated type-safe version of printf(), even though you hate templates?</div>
                    </div>
                </div>
                <div data-timestamp="5968.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:39:28</span>MULPD is only half as fast if you do millions of operations...</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:39:28</span>MULPD is only half as fast if you do millions of operations...</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:39:28</span>MULPD is only half as fast if you do millions of operations...</div>
                    </div>
                </div>
                <div data-timestamp="6003.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:40:03</span>What low level language would you suggest to someone new to programming?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:40:03</span>What low level language would you suggest to someone new to programming?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:40:03</span>What low level language would you suggest to someone new to programming?</div>
                    </div>
                </div>
                <div data-timestamp="6013.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:40:13</span>Are we using the Win32 API but compiling for 64-bits? Do we need to compile for 32-bits for Windows XP support? It looks like we have int64 and real64 in the cpp</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:40:13</span>Are we using the Win32 API but compiling for 64-bits? Do we need to compile for 32-bits for Windows XP support? It looks like we have int64 and real64 in the cpp</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:40:13</span>Are we using the Win32 API but compiling for 64-bits? Do we need to compile for 32-bits for Windows XP support? It looks like we have int64 and real64 in the cpp</div>
                    </div>
                </div>
                <div data-timestamp="6050.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:40:50</span>In game development, do you follow enterprise design patterns, or do you have some different design patterns?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:40:50</span>In game development, do you follow enterprise design patterns, or do you have some different design patterns?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:40:50</span>In game development, do you follow enterprise design patterns, or do you have some different design patterns?</div>
                    </div>
                </div>
                <div data-timestamp="6069.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:41:09</span>What do you use for collections if you do not use templates?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:41:09</span>What do you use for collections if you do not use templates?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:41:09</span>What do you use for collections if you do not use templates?</div>
                    </div>
                </div>
                <div data-timestamp="6078.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:41:18</span>I didn&#39;t get the outome of the MULPS/MULPD compare. The latency packing was the same, how does that end up being double time?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:41:18</span>I didn&#39;t get the outome of the MULPS/MULPD compare. The latency packing was the same, how does that end up being double time?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:41:18</span>I didn&#39;t get the outome of the MULPS/MULPD compare. The latency packing was the same, how does that end up being double time?</div>
                    </div>
                </div>
                <div data-timestamp="6244.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:44:04</span>RE MULPS/MULPD: If you&#39;re writing SIMD code then you care, otherwise you don&#39;t.</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:44:04</span>RE MULPS/MULPD: If you&#39;re writing SIMD code then you care, otherwise you don&#39;t.</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:44:04</span>RE MULPS/MULPD: If you&#39;re writing SIMD code then you care, otherwise you don&#39;t.</div>
                    </div>
                </div>
                <div data-timestamp="6358.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:45:58</span>Comment about compiler auto-vectorization</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:45:58</span>Comment about compiler auto-vectorization</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:45:58</span>Comment about compiler auto-vectorization</div>
                    </div>
                </div>
                <div data-timestamp="6463.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:47:43</span>Tom Forsyth&#39;s rant on double precision</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:47:43</span>Tom Forsyth&#39;s rant on double precision</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:47:43</span>Tom Forsyth&#39;s rant on double precision</div>
                    </div>
                </div>
                <div data-timestamp="6515.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:48:35</span>Will we take MSVC all the way to shipping or will we use LLVM even on Windows?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:48:35</span>Will we take MSVC all the way to shipping or will we use LLVM even on Windows?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:48:35</span>Will we take MSVC all the way to shipping or will we use LLVM even on Windows?</div>
                    </div>
                </div>
                <div data-timestamp="6603.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:50:03</span>What&#39;s an intrinsic?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:50:03</span>What&#39;s an intrinsic?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:50:03</span>What&#39;s an intrinsic?</div>
                    </div>
                </div>
                <div data-timestamp="6923.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:55:23</span>Switch back to debug build from optimized</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:55:23</span>Switch back to debug build from optimized</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:55:23</span>Switch back to debug build from optimized</div>
                    </div>
                </div>
                <div data-timestamp="6963.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:56:03</span>Isn&#39;t it a pain to work in Windows, especially as a programmer?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:56:03</span>Isn&#39;t it a pain to work in Windows, especially as a programmer?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:56:03</span>Isn&#39;t it a pain to work in Windows, especially as a programmer?</div>
                    </div>
                </div>
                <div data-timestamp="7025.000" class="marker cat_nullTopic programming">
                    <div class="cineraContent"><span class="timecode">1:57:05</span>Didn&#39;t we want to start adding warnings?</div>
                    <div class="progress faded">
                        <div class="cineraContent"><span class="timecode">1:57:05</span>Didn&#39;t we want to start adding warnings?</div>
                    </div>
                    <div class="progress main">
                        <div class="cineraContent"><span class="timecode">1:57:05</span>Didn&#39;t we want to start adding warnings?</div>
                    </div>
                </div>
            </div>
                <a class="episodeMarker next" href="https://hero.handmade.network/episode/code/day011/"><div>&#9196;</div><div>Next: 'The Basics of Platform API Design'</div><div>&#9196;</div></a>
            </div>
        </div>
        </div>
    <script type="text/javascript" src="https://handmade.network/public/annotations/cinera_player_post.js?r=285016ab"></script>
        </div>
        <!-- __CINERA_SCRIPT__ -->

        <article id="video-notes">
            <h1>QueryPerformanceCounter and RDTSC</h1>
            <p>Today we look at some techniques to get basic timing information from your running game. Timing, like everything, is
                more complicated than it first appears.</p>
            <p>A Couple of ideas of time:</p>
            <ul>
                <li>Wall clock time - time as it passes in the real world. Measured in seconds.</li>
                <li>Processor time - how many cycles? this is related to wall clock time by processor frequency, but for a long time now
                    frequency varies a lot and quickly.</li>
            </ul>
            <h2 id="wall-clock-time">Wall Clock Time</h2>
            <p>The Windows platform attempts to provide us with some tools for high precision timing, but as it is a complicated topic,
                there are some gotchas.</p>
            <p><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644905.aspx"><code>QueryPerformanceFrequency()</code></a> returns a
                LARGE_INTEGER number of counts/sec. It&#39;s guaranteed to be stable, so you can get away with just calling it once at
                startup. <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904.aspx"><code>QueryPerformanceCounter()</code></a> returns
                a LARGE_INTEGER number of counts.</p>
            <p>So, dividing counter/freq will give you a number of seconds since some unknown time in the past. More useful would be
                (counter - last_counter)/freq. This will allow us to get an elapsed time since some known point in the past. However,
                almost anything we want to time should be less than a second, and since this is an integer divide, anything between 1
                and 0 seconds will return 0. Not super useful. So, we instead multiply the elapsed counts by 1000 to get our formula
                to get to elapsed milliseconds.</p>
        <pre><code>elapsedMs = (1000*(counter - last_counter)) / freq
        </code></pre><p>To get instantaneous frames per second, we can just divide without changing to milliseconds:</p>
        <pre><code>fps = freq / (counter - last_counter)
        </code></pre><p>Important ideas:</p>
        <ul>
            <li>To time a frame, only query the timer once per frame, otherwise your timer will leave out time between last frame&#39;s
                end and this frame&#39;s start.</li>
        </ul>
        <h2 id="processor-time">Processor Time</h2>
        <p>Every x86 family proccessor has a <a href="http://en.wikipedia.org/wiki/Time_Stamp_Counter">Timestamp Counter (TSC)</a>, which
            increments with every clock cycle since it was reset. RDTSC is a processor intruction that reads the TSC into general
            purpose registers.</p>
        <p>For processors before Sandy Bridge but after dynamic clocking, RDTSC gave us actual clocks, but it was difficult to
            correlate to wall time because of the variable frequency. Since Sandy Bridge, they give us &quot;nominal&quot; clocks, which
            is to say the number of clocks elapsed at the chip&#39;s nominal frequency. These should correlate closely to wall clock
            time, but make tracking the &quot;number of cycles&quot; notion of processor time more difficult.</p>
        <p>RDTSC is usually exposed in a compiler intrinsic. Check the docs for your compiler.</p>
        <p>Resources:</p>
        <ul>
            <li><a href="http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html">Intel Architecture Manuals</a></li>
        </ul>
        <h2 id="other-topics">Other topics</h2>
        <p>Casey had to cover a couple of new corners of C in order to work with the techniques above.</p>
        <h3 id="union-types">Union types</h3>
        <p><a href="http://en.wikipedia.org/wiki/Union_type">Union types</a> are a C feature that let you superimpose a number of different
            layouts over the same chunk of memory. For example LARGE_INTEGER, the return type of the QueryPerf calls. I can treat
            it as an int64 by accessing its QuadPart, or as two int32s via HighPart and LowPart.</p>
        <h3 id="compiler-intrinsics">Compiler Intrinsics</h3>
        <p>An <a href="http://en.wikipedia.org/wiki/Intrinsic_function">intrinsic</a> is a compiler-specific extension that allows direct
            invocation of some processor instruction. They generally need to be extensions to the compiler so they can avoid all
            the expensive niceties compilers have to afford functions.</p>
        </article>
    </body>
</html>
